CREATE TABLE users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   email VARCHAR(255),
   name VARCHAR(255),
   CONSTRAINT pk_users PRIMARY KEY (id)
);

CREATE TABLE category (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   name VARCHAR(255),
   CONSTRAINT pk_category PRIMARY KEY (id)
);

CREATE TABLE requests (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   created TIMESTAMP WITHOUT TIME ZONE,
   event BIGINT,
   requester BIGINT,
   status VARCHAR(255),
   CONSTRAINT pk_requests PRIMARY KEY (id)
);

CREATE TABLE events (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   annotation VARCHAR(255),
   description VARCHAR(255),
   created_on TIMESTAMP WITHOUT TIME ZONE,
   location UNKNOWN__RU.PRACTICUM.EXPLORE.MODEL.EVENT.LOCATION,
   event_date TIMESTAMP WITHOUT TIME ZONE,
   title VARCHAR(255),
   paid BOOLEAN NOT NULL,
   request_moderation BOOLEAN NOT NULL,
   participant_limit INTEGER NOT NULL,
   initiator BIGINT,
   category BIGINT,
   state VARCHAR(255),
   state_action VARCHAR(255),
   available BOOLEAN NOT NULL,
   CONSTRAINT pk_events PRIMARY KEY (id)
);

ALTER TABLE events ADD CONSTRAINT FK_EVENTS_ON_CATEGORY FOREIGN KEY (category) REFERENCES category (id);
ALTER TABLE events ADD CONSTRAINT FK_EVENTS_ON_INITIATOR FOREIGN KEY (initiator) REFERENCES users (id);
ALTER TABLE requests ADD CONSTRAINT FK_REQUESTS_ON_EVENT FOREIGN KEY (event) REFERENCES events (id);
ALTER TABLE requests ADD CONSTRAINT FK_REQUESTS_ON_PARTICIPANT FOREIGN KEY (requester) REFERENCES users (id);
